<!DOCTYPE html>
<html lang="es"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="Usa los controles para practicar preguntas aleatorias y revelar las respuestas. Las preguntas se obtienen de quizpack.json.">  

  <title>
    
      Estudiar
    
  </title>

  <link rel="shortcut icon" type="image/x-icon" href="/" />
  
  
  
  
  
  <link rel="stylesheet" href="/css/main.5434bd314af44f6353b8b35a80419909bf984c0348babb07e3b86a5efd2fc42db5940d0d9b717d017ffd0d10fbd3ecc0940019697fd843005791d04967f8f4a4.css" integrity="sha512-VDS9MUr0T2NTuLNagEGZCb&#43;YTANIursH47hqXv0vxC21lA0Nm3F9AX/9DRD70&#43;zAlAAZaX/YQwBXkdBJZ/j0pA==" />
  
  
  <link rel="stylesheet" href="/css/custom.css" />
  
  
</head>
<body a="auto">
<button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
  <span class="theme-icon">üåô</span>
</button>

<style>
.theme-toggle {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 1.2em;
  padding: 0.5rem;
  border-radius: 50%;
  transition: all 0.3s ease;
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 1000;
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.theme-toggle:hover {
  background-color: var(--primary-text-color, #000);
  color: var(--bg-color, #fff);
  transform: scale(1.1);
}

.theme-toggle:focus {
  outline: 2px solid var(--link-color, #3548cf);
  outline-offset: 2px;
}

.theme-icon {
  transition: transform 0.3s ease;
}

.theme-toggle:hover .theme-icon {
  transform: rotate(180deg);
}

 
@media (max-width: 768px) {
  .theme-toggle {
    top: 0.5rem;
    right: 0.5rem;
    width: 2rem;
    height: 2rem;
    font-size: 1em;
  }
}
</style>

<script>
(function() {
  'use strict';
  
  
  const THEME_KEY = 'theme-preference';
  const THEMES = {
    LIGHT: 'light', 
    DARK: 'dark'
  };
  
  
  const ICONS = {
    [THEMES.LIGHT]: '‚òÄÔ∏è',
    [THEMES.DARK]: 'üåô'
  };
  
  
  function getCurrentTheme() {
    return localStorage.getItem(THEME_KEY) || THEMES.LIGHT;
  }
  
  
  function saveTheme(theme) {
    localStorage.setItem(THEME_KEY, theme);
  }
  
  
  function applyTheme(theme) {
    document.body.setAttribute('a', theme);
  }
  
  
  function updateButtonIcon(theme) {
    const button = document.getElementById('theme-toggle');
    const icon = button.querySelector('.theme-icon');
    icon.textContent = ICONS[theme];
  }
  
  
  function cycleTheme() {
    const current = getCurrentTheme();
    let next;
    
    switch(current) {
      case THEMES.LIGHT:
        next = THEMES.DARK;
        break;
      case THEMES.DARK:
        next = THEMES.LIGHT;
        break;
      default:
        next = THEMES.LIGHT;
    }
    
    saveTheme(next);
    applyTheme(next);
    updateButtonIcon(next);
  }
  
  
  function initTheme() {
    const theme = getCurrentTheme();
    applyTheme(theme);
    updateButtonIcon(theme);
  }
  
  
  function addToggleListener() {
    const button = document.getElementById('theme-toggle');
    if (button) {
      button.addEventListener('click', cycleTheme);
    }
  }
  
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      initTheme();
      addToggleListener();
    });
  } else {
    initTheme();
    addToggleListener();
  }
})();
</script>

<div class="lang-switch-container">
  <ul class="lang-switch">
    <li><a href="/study/" title="English" aria-label="English">EN</a>
    </li>
  </ul>
</div>
<main class="page-content" aria-label="Content">
            <div class="w"><nav class="breadcrumbs" aria-label="Breadcrumb">
  <ol><li>
      <a href="https://juanlebrero.com/es/">Juan Lebrero</a>
    </li><li aria-current="page">Estudiar</li>
  </ol>
</nav>
<article class="post">
  <header>
    <h1>Estudiar</h1>
    <p class="post-description">Practica preguntas para completar del quizpack. Generado por GPT-5</p>
  </header>

  <section id="quiz-controls" class="quiz-controls">
    <button id="btn-randomize" type="button">Randomizar</button>
    <button id="btn-prev" type="button">‚óÄÔ∏é Anterior</button>
    <button id="btn-next" type="button">Siguiente ‚ñ∂Ô∏é</button>
    <button id="btn-reveal" type="button">Revelar</button>
    <span id="quiz-progress" class="quiz-progress"></span>
  </section>

  <section id="quiz-container" class="quiz-container">
    <div id="quiz-topic" class="quiz-topic"></div>
    <div id="quiz-prompt" class="quiz-prompt"></div>
    <form id="quiz-form" class="quiz-form"></form>
    <div id="quiz-feedback" class="quiz-feedback"></div>
  </section>

  <noscript>
    <p>Este m√≥dulo requiere JavaScript para interactuar con las preguntas.</p>
  </noscript>
</article>

<script>

(function() {
  const quizUrl = '/quizpack.json';
  
  let quizPack = null;
   
  let flatQuestions = [];
  let order = [];
  let idx = 0;
  let revealed = false;

  const $topic = document.getElementById('quiz-topic');
  const $prompt = document.getElementById('quiz-prompt');
  const $form = document.getElementById('quiz-form');
  const $feedback = document.getElementById('quiz-feedback');
  const $progress = document.getElementById('quiz-progress');
  const $btnPrev = document.getElementById('btn-prev');
  const $btnNext = document.getElementById('btn-next');
  const $btnReveal = document.getElementById('btn-reveal');
  const $btnRandomize = document.getElementById('btn-randomize');

  function shuffleInPlace(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }

  function buildInputsForPrompt(prompt, answers) {
    
    const pattern = /___(\d+)___/g;
    let lastIndex = 0;
    const container = document.createElement('div');
    container.className = 'prompt-line';
    let match;
    while ((match = pattern.exec(prompt)) !== null) {
      const before = prompt.slice(lastIndex, match.index);
      if (before) container.appendChild(document.createTextNode(before));
      const k = parseInt(match[1], 10) - 1; 
      const input = document.createElement('input');
      input.type = 'text';
      input.inputMode = 'text';
      input.autocomplete = 'off';
      input.className = 'quiz-blank';
      input.name = `blank_${k}`;
      input.placeholder = `_${k + 1}_`;
      input.dataset.index = String(k);
      container.appendChild(input);
      lastIndex = match.index + match[0].length;
    }
    const tail = prompt.slice(lastIndex);
    if (tail) container.appendChild(document.createTextNode(tail));
    return container;
  }

  function normalize(s) {
    return s
      .toLowerCase()
      .trim()
      .normalize('NFD')
      .replace(/\p{Diacritic}+/gu, '')
      .replace(/\s+/g, ' ');
  }

  function render() {
    if (!order.length) return;
    const q = flatQuestions[order[idx]];
    revealed = false;
    $feedback.textContent = '';
    $topic.textContent = '';
    $prompt.innerHTML = '';
    $form.innerHTML = '';

    if (q.sectionTitle) {
      $topic.textContent = `Tema: ${q.sectionTitle}`;
    }

    const promptNode = buildInputsForPrompt(q.prompt, q.answers);
    $prompt.appendChild(promptNode);

    const checkBtn = document.createElement('button');
    checkBtn.type = 'button';
    checkBtn.textContent = 'Comprobar';
    checkBtn.addEventListener('click', () => check(q));
    $form.appendChild(checkBtn);

    $progress.textContent = `${idx + 1} / ${order.length}`;
  }

  function check(q) {
    const inputs = Array.from($prompt.querySelectorAll('input.quiz-blank'));
    let numCorrect = 0;
    inputs.forEach((input) => {
      const k = parseInt(input.dataset.index || '0', 10);
      const expected = q.answers[k] || '';
      const ok = normalize(input.value) === normalize(expected);
      input.classList.toggle('is-correct', ok);
      input.classList.toggle('is-incorrect', !ok);
      if (ok) numCorrect += 1;
    });
    $feedback.textContent = `Correctas: ${numCorrect}/${inputs.length}`;
  }

  function reveal(q) {
    const inputs = Array.from($prompt.querySelectorAll('input.quiz-blank'));
    inputs.forEach((input) => {
      const k = parseInt(input.dataset.index || '0', 10);
      input.value = q.answers[k] || '';
      input.classList.remove('is-incorrect');
      input.classList.add('is-correct');
    });
    revealed = true;
  }

  function next() {
    if (!order.length) return;
    idx = (idx + 1) % order.length;
    render();
  }

  function prev() {
    if (!order.length) return;
    idx = (idx - 1 + order.length) % order.length;
    render();
  }

  function randomize() {
    shuffleInPlace(order);
    idx = 0;
    render();
  }

  async function init() {
    try {
      const res = await fetch(quizUrl, { cache: 'no-store' });
      if (!res.ok) throw new Error('No se pudo cargar quizpack.json');
      quizPack = await res.json();

      
      flatQuestions = [];
      for (const section of (quizPack.sections || [])) {
        for (const q of (section.questions || [])) {
          if (q && q.prompt && Array.isArray(q.answers)) {
            flatQuestions.push({
              ...q,
              sectionTitle: section.title,
              sectionPath: section.path
            });
          }
        }
      }
      order = Array.from({ length: flatQuestions.length }, (_, i) => i);
      render();
    } catch (err) {
      $prompt.textContent = 'Error cargando el cuestionario.';
      console.error(err);
    }
  }

  $btnNext.addEventListener('click', next);
  $btnPrev.addEventListener('click', prev);
  $btnRandomize.addEventListener('click', randomize);
  $btnReveal.addEventListener('click', () => {
    const q = flatQuestions[order[idx]];
    reveal(q);
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowRight') next();
    if (e.key === 'ArrowLeft') prev();
  });

  init();
})();
</script>

<style>
.quiz-controls { display: flex; gap: .5rem; align-items: center; flex-wrap: wrap; margin: 1rem 0; }
.quiz-progress { opacity: .7; margin-left: .5rem; }
.quiz-topic { font-size: 0.9rem; font-weight: 600; color: #666; margin-bottom: 0.75rem; padding: 0.5rem 0.75rem; background: #f5f5f5; border-left: 3px solid #3548cf; border-radius: 4px; }
body[a="dark"] .quiz-topic { color: #aaa; background: #2a2a2a; }
.quiz-prompt { font-size: 1.1rem; margin: 1rem 0; }
.quiz-form button { margin-top: .5rem; }
input.quiz-blank { min-width: 8ch; padding: .25rem .5rem; }
input.quiz-blank.is-correct { outline: 2px solid #2e7d32; background: #e8f5e9; }
input.quiz-blank.is-incorrect { outline: 2px solid #c62828; background: #ffebee; }
</style>

                
<footer class="footer">
  <div class="footer-content">
    <p>&copy; 2025 Juan Lebrero. All rights reserved.</p>
    <div class="footer-links">
      <a href="/es/about/">About</a>
      <span class="separator">‚Ä¢</span>
      <a href="/es/contact/">Contact</a>
      <span class="separator">‚Ä¢</span>
      <a href="/es/index.xml">RSS</a>
    </div>
  </div>
</footer>

            </div>
        </main>
    </body>
</html>
